# YouTube历史记录保存器

一个功能强大的Chrome/Edge浏览器插件,自动保存您的YouTube观看历史记录,并提供美观的可视化界面。

## 主要功能

### 🎯 核心功能
- **全自动保存**: 观看YouTube视频时自动保存历史记录,无需手动操作
- **本地存储**: 所有数据保存在本地浏览器中,保护您的隐私
- **重复观看统计**: 自动统计每个视频的观看次数和观看时间
- **永久保存**: 不受YouTube官方历史记录删除限制

### 📊 可视化界面
- **缩略图展示**: 显示视频缩略图、标题、频道信息
- **时间显示**: 智能显示观看时间(刚刚、几分钟前、具体日期等)
- **观看统计**: 显示每个视频的观看次数,标注常看视频
- **美观设计**: 渐变色主题,卡片式布局,流畅动画效果

### 🔍 搜索与筛选
- **关键词搜索**: 支持按标题或频道名称搜索
- **日期筛选**: 按日期范围筛选历史记录
- **一键重置**: 快速清除所有筛选条件

### 💾 数据管理
- **导出功能**: 将历史记录导出为JSON文件,方便备份
- **导入功能**: 支持导入之前导出的历史记录或YouTube官方导出的数据
- **删除记录**: 可以删除单条历史记录
- **清空功能**: 支持一键清空所有历史记录(需二次确认)

### 📈 统计信息
- **总记录数**: 显示保存的视频总数
- **总观看次数**: 统计所有视频的观看次数总和
- **频道统计**: 自动统计最常观看的频道(后台功能)

## 安装方法

### Chrome浏览器

1. **下载插件**
   - 下载 `youtube-history-saver.zip` 文件
   - 解压到任意文件夹

2. **加载插件**
   - 打开Chrome浏览器
   - 在地址栏输入: `chrome://extensions/`
   - 打开右上角的"开发者模式"开关
   - 点击"加载已解压的扩展程序"
   - 选择解压后的 `youtube-history-saver` 文件夹
   - 插件安装完成!

### Edge浏览器

1. **下载插件**
   - 下载 `youtube-history-saver.zip` 文件
   - 解压到任意文件夹

2. **加载插件**
   - 打开Edge浏览器
   - 在地址栏输入: `edge://extensions/`
   - 打开左下角的"开发人员模式"开关
   - 点击"加载解压缩的扩展"
   - 选择解压后的 `youtube-history-saver` 文件夹
   - 插件安装完成!

## 使用方法

### 自动保存历史记录

1. 安装插件后,正常浏览YouTube网站
2. 当您观看视频时,插件会自动保存历史记录
3. 无需任何手动操作,完全自动化

### 查看历史记录

1. 点击浏览器工具栏中的插件图标
2. 弹出窗口会显示所有历史记录
3. 每条记录包含:
   - 视频缩略图和时长
   - 视频标题
   - 频道名称
   - 观看时间
   - 观看次数

### 搜索历史记录

1. 在搜索框中输入关键词(标题或频道名)
2. 点击"搜索"按钮或按回车键
3. 显示匹配的历史记录

### 按日期筛选

1. 选择"开始日期"和"结束日期"
2. 点击"筛选"按钮
3. 显示该时间段内的历史记录

### 导出历史记录

1. 点击"导出"按钮
2. 选择保存位置
3. 文件名格式: `youtube-history-YYYYMMDD-HHMMSS.json`

### 导入历史记录

1. 点击"导入"按钮
2. 选择之前导出的JSON文件
3. 系统会自动合并历史记录(不会重复)

### 导入YouTube官方历史记录

如果您想导入YouTube官方的历史记录:

1. **导出YouTube官方数据**
   - 访问 [Google Takeout](https://takeout.google.com/)
   - 选择"YouTube和YouTube Music"
   - 只勾选"历史记录"
   - 下载数据包

2. **转换格式**(需要手动处理)
   - YouTube官方导出的格式与本插件不同
   - 您需要将官方格式转换为本插件的JSON格式
   - 插件JSON格式示例:
   ```json
   {
     "视频ID": {
       "videoId": "视频ID",
       "title": "视频标题",
       "channel": "频道名称",
       "channelUrl": "频道链接",
       "thumbnail": "缩略图链接",
       "videoUrl": "视频链接",
       "duration": "时长",
       "firstWatched": 时间戳,
       "lastWatched": 时间戳,
       "watchCount": 1,
       "watchHistory": [时间戳]
     }
   }
   ```

3. **导入转换后的数据**
   - 点击插件的"导入"按钮
   - 选择转换后的JSON文件

## 数据格式说明

### 存储位置
- 所有数据保存在浏览器的 `chrome.storage.local` 中
- 数据不会上传到任何服务器
- 卸载插件会清除所有数据,请提前导出备份

### JSON格式
```json
{
  "videoId": {
    "videoId": "dQw4w9WgXcQ",
    "title": "视频标题",
    "channel": "频道名称",
    "channelUrl": "https://www.youtube.com/channel/...",
    "thumbnail": "https://i.ytimg.com/vi/dQw4w9WgXcQ/hqdefault.jpg",
    "videoUrl": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
    "duration": "3:33",
    "firstWatched": 1696492800000,
    "lastWatched": 1696492800000,
    "watchCount": 1,
    "watchHistory": [1696492800000]
  }
}
```

## 常见问题

### Q: 插件会自动保存所有观看的视频吗?
A: 是的,只要您在YouTube上观看视频,插件就会自动保存历史记录。

### Q: 数据保存在哪里?
A: 数据保存在浏览器的本地存储中,不会上传到任何服务器。

### Q: 卸载插件后数据会丢失吗?
A: 是的,卸载插件会清除所有数据。建议定期导出备份。

### Q: 可以导入YouTube官方的历史记录吗?
A: 可以,但需要先将YouTube官方格式转换为本插件的JSON格式。

### Q: 插件会影响YouTube的正常使用吗?
A: 不会,插件在后台静默运行,不会影响YouTube的任何功能。

### Q: 为什么有些视频没有保存?
A: 可能的原因:
- 页面加载不完整
- 视频信息提取失败
- 浏览器权限限制
建议刷新页面重新观看

### Q: 可以在无痕模式下使用吗?
A: 可以,但需要在扩展程序设置中允许插件在无痕模式下运行。

### Q: 支持YouTube Music吗?
A: 目前主要支持YouTube视频,YouTube Music支持可能不完整。

## 技术说明

### 技术栈
- **Manifest V3**: 使用最新的Chrome扩展API
- **原生JavaScript**: 无外部依赖,轻量高效
- **Chrome Storage API**: 本地数据存储
- **Content Scripts**: 页面内容提取
- **Service Worker**: 后台数据处理

### 浏览器兼容性
- ✅ Chrome 88+
- ✅ Edge 88+
- ✅ Brave
- ✅ Opera
- ❌ Firefox (需要修改manifest为V2)
- ❌ Safari (不支持Manifest V3)

### 权限说明
- `storage`: 保存历史记录到本地
- `tabs`: 检测YouTube标签页
- `webNavigation`: 监听页面导航事件
- `*://*.youtube.com/*`: 访问YouTube页面内容

## 隐私政策

- ✅ 所有数据仅保存在本地浏览器
- ✅ 不收集任何个人信息
- ✅ 不上传任何数据到服务器
- ✅ 不包含任何追踪代码
- ✅ 完全开源,代码透明

## 更新日志

### v1.0.0 (2025-10-05)
- ✨ 首次发布
- ✅ 自动保存YouTube观看历史
- ✅ 可视化历史记录展示
- ✅ 搜索和筛选功能
- ✅ 导出/导入功能
- ✅ 观看统计功能

## 开发者信息

### 项目结构
```
youtube-history-saver/
├── manifest.json          # 插件配置文件
├── popup.html            # 弹窗页面
├── css/
│   └── popup.css         # 样式文件
├── js/
│   ├── background.js     # 后台脚本
│   ├── content.js        # 内容脚本
│   └── popup.js          # 弹窗脚本
├── icons/
│   ├── icon16.png        # 16x16图标
│   ├── icon48.png        # 48x48图标
│   └── icon128.png       # 128x128图标
└── README.md             # 说明文档
```

### 本地开发
1. 克隆或下载项目
2. 在浏览器中加载解压的扩展程序
3. 修改代码后刷新插件即可测试

### 贡献代码
欢迎提交Issue和Pull Request!

## 许可证

MIT License

## 支持

如有问题或建议,欢迎反馈!

---

**享受更好的YouTube观看体验!** 🎉
